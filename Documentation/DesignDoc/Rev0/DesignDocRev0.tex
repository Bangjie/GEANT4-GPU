\documentclass[12pt]{article}

% Packages
\usepackage[margin=1.2in]{geometry}
\usepackage{graphicx}
\usepackage{enumerate}
\usepackage{listings}
\usepackage{titling}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{makecell}
\usepackage{caption}
\usepackage{array}
\captionsetup[table]{skip=2pt}
% Comments --------------------------------------------------------------------
\usepackage{xcolor}
\newif\ifcomments\commentstrue
\ifcomments \newcommand{\authornote}[3]{\textcolor{#1}{[#3 ---#2]}}
\newcommand{\todo}[1]{\textcolor{red}{[TODO: #1]}} \else
\newcommand{\authornote}[3]{} \newcommand{\todo}[1]{} \fi
\newcommand{\wss}[1]{\authornote{magenta}{SS}{#1}}
\newcommand{\ds}[1]{\authornote{blue}{DS}{#1}}
% End Comments ---------------------------------------------------------------


%title page format?%


\begin{document}

\title{
\LARGE GEANT-4 GPU Port:
\\\vspace{10mm}
\large \textbf{Design Document}
\vspace{20mm}
}
\author{
Stuart Douglas -- 1214422
\\Matthew Pagnan -- 1208693
\\Rob Gorrie -- 1222547
\\Victor Reginato -- 1209975
\vspace{10mm}
}
\date{\today}
	
\maketitle
\newpage

\tableofcontents
 
\section{Introduction}% ============== Matt
\subsection{Purpose}
The purpose of GEANT4-GPU is to reduce the computation times of particle simulations.
\subsection{Description}
The project aims to improve the computation times of GEANT4 particle simulations by running simulations on the GPU. GEANT4-GPU will allow users to 
build GEANT4 with an enable GPU acceleration option. Our implementation will be available on Mac, Linux and Windows operating systems with NVIDIA graphics cards. GEANT4-GPU must be able to do particle simulations much faster than running the simulations on a GEANT4 build that runs entirely on the CPU.
\subsection{Scope}
The scope of GEANT4-GPU will be limited to Engineering Physics simulations; particularly those that make use of the NeutronHPVector class.


\section*{Revision History}
All major edits to this document will be recorded in the table below.

\begin{table}[h]
\centering
\caption{Revision History}\label{Table_Revision}
\begin{tabular}{lll}

\toprule
\bf Description of Changes & \bf Author & \bf Date\\\midrule
Set up sections and filled out Introduction section & Matthew & 2015-12-15\\
\bottomrule
\end{tabular}
\end{table}

\section{Anticipated and unlikely changes}
\subsection{Likely Changes} %========== Rob

\subsection{Unlikely Changes} %========= Rob

\section{Module Hierarchy}%============= Stuart

\section{Connection between requirements and design}% ===== Stuart

\section{Traceability matrices}% =========== Victor
\subsection{Note About G4 variables}
Geant4 uses it's own version of the standard variables (G3int, G4bool, G4double, etc). These variables behave exactly like their non G4 counterparts. These G4 variables were implemented as a standard.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ----- NeutronHPDataPoint
\section{MIS of NeutronHPDataPoint}

\subsection{Interface Syntax}% ================ Victor
\begin{tabular}{| l | l | l |  l |}
\hline
Routine Name & Input & Output & Exceptions \\ \hline
G4NeutronHPDataPoint &  &  &  \\ \hline
G4NeutronHPDataPoint & G4double, G4double &  & \\ \hline
operator(REVISE THIS) & G4NeutronHPDataPoint &  & \\ \hline
GetEnergy & & G4double &  \\ \hline
GetXsection & & G4double &  \\ \hline
SetEnergy & G4double & & \\ \hline
SetXsection & G4double & & \\ \hline
GetX & & G4double &  \\ \hline
GetY & & G4double &  \\ \hline
SetX & G4double & & \\ \hline
SetY & G4double & & \\ \hline
SetData & G4double, G4double & &\\ \hline
\end{tabular}

\subsection{Exported Access Programs}% ============ Rob

\subsection{Interface Semantics}

\subsubsection{State Variables}% ================== Matt
energy : G4Double\\
xSec    : G4Double

%state invariant

\subsubsection{Environment Variables}% ============== Matt
There are no environment variables for this Module.

\subsubsection{Assumption}% ==================== Stuart	

\subsubsection{Access Program Semantics}% =========== Victor
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ---- NeutronHPDataPoint


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ----- NeutronHPVector
\section{MIS of NeutronHPVector}

\subsection{Interface Syntax}% ================ Victor
%NOTE friend allows members that are not an instance of a particular class, to access private variables the left and right vector are %allowed to access the middle vectors private variables, and the operator function also has access to those variables 
\begin{tabular}{| p{4cm} | p{4cm} | p{4cm} |  p{4cm} |}
\hline
Routine Name & Input & Output & Exceptions \\ \hline
G4NeutronHPVector & & & \\ \hline
G4NeutronHPVector & G4int & & \\ \hline
SetVerbose & G4int & & \\ \hline
Times &G4double & & \\ \hline
SetPoint  &G4int, G4NeutronHPDataPoint & & \\ \hline
SetData & G4int, G4double,G4double& & \\ \hline
SetX & G4int, G4double & & \\ \hline
SetEnergy & G4int, G4double & & \\ \hline
SetY & G4int, G4double & & \\ \hline
SetXsec & G4int, G4double & & \\ \hline
GetEnergy & G4int & G4double & \\ \hline
GetXsec & G4int & G4double & \\ \hline
GetXsec & G4double & G4double & \\ \hline
GetXsec & G4double,G4int & G4double & \\ \hline
GetX & G4int & G4double & \\ \hline
GetY & G4double & G4double & \\ \hline
GetY & G4int & G4double & \\ \hline
GetVectorLength & & G4int & \\ \hline
GetPoint & G4int & const G4NeutronHPDataPoint \& & \\ \hline
Hash & & & \\ \hline
ReHash & & & \\ \hline
InitInterpolation & istream & & \\ \hline
Init & istream,G4int, G4double, G4double& & \\ \hline
Init & istream, G4double,G4double & & \\ \hline
ThinOut & G4double & & \\ \hline
SetLabel & G4double & & \\ \hline
GetLabel & & G4double & \\ \hline
CleanUp & & & \\ \hline
\end{tabular}
\\
\\
\\
\begin{tabular}{| p{4cm} | p{4cm} | p{4cm} |  p{4cm} |}
\hline
Routine Name & Input & Output & Exceptions \\ \hline
Sample & & G4double & \\ \hline
Debug & & G4double * & \\ \hline
Merge & G4NeutronHPVector *,  G4NeutronHPVector *& & \\ \hline
Merge & G4InterpolationScheme, & & \\ 
&  G4double,  & & \\
& G4NeutronHPVector *,  & & \\
& G4NeutronHPVector * & & \\ \hline
SampleLin & & G4double & \\ \hline
IntegrateAndNormalise & & & \\ \hline
Integrate & & & \\ \hline
GetIntegral & & G4double & \\ \hline
SetInterpolation- Manager & const G4InterpolationManager \& & & \\ \hline
SetInterpolation- Manager & G4InterpolationManager \& & & \\ \hline
G4Interpolation- Manager & & const G4Interpolation- Manager  \& & \\ \hline
SetScheme & G4int,const G4InterpolationScheme \& & & \\ \hline
GetScheme & G4int & G4InterpolationScheme & \\ \hline
GetMeanX & & G4double & \\ \hline
GetBlocked & & vector\textless G4double\textgreater & \\ \hline
GetBuffered & & vector\textless G4double\textgreater & \\ \hline
Get15percentBorder & & G4double & \\ \hline
Get50percentBorder & & G4double & \\ \hline
Check & G4int & & \\ \hline
IsBlocked & G4double & G4bool & \\ \hline
\end{tabular}

\subsection{Exported Access Programs}% ============ Rob

\subsection{Interface Semantics} 

\subsubsection{State Variables}% ================== Matt
G4NeutronHPInterPolator : theLin\\
totalIntegral : G4double\\
G4NeutronHPDataPoint * : theData\\
G4InterpolationManager : theManager\\
G4double * : theIntegral\\
G4int : nEntries\\
G4int : nPoints\\
G4double : label\\
G4NeutronInterpolator : theInt\\
G4int : Verbose\\
G4int : isFreed\\
G4NeutronHPHash : theHash\\
G4double : maxValue\\
vector<G4double> : theBlocked\\
vector <G4double> : theBuffered\\
G4double : the15percentBorderCash\\
G4double : the50percentBorderCash


\subsubsection{Environment Variables}% ============== Matt
There are no environment variables for this Module.

\subsubsection{Assumption}% ==================== Stuart	

\subsubsection{Access Program Semantics}% =========== Victor
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ---- NeutronHPVector

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ----- Cmake Files
\section{MIS of CMake Files}

\subsection{Interface Syntax}% ================ Victor
\begin{tabular}{| p{4cm} | p{4cm} | p{4cm} |  p{4cm} |}
\hline
Routine Name & Input & Output & Exceptions \\ \hline
cmake_minimum_required & [VERSION], [FATAL_ERROR]& & \\ \hline

\end{tabular}

\subsection{Exported Access Programs}% ============ Rob

\subsection{Interface Semantics}

\subsubsection{State Variables}% ================== Matt
useCuda : Bool

\subsubsection{Environment Variables}% ============== Matt
NeutronHPVectorGPU.cu : cuda file with GPU code

\subsubsection{Assumption}% ==================== Stuart	

\subsubsection{Access Program Semantics}% =========== Victor
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ---- Cmake Files


\end{document}
