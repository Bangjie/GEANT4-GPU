<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<!-- Created on October, 6  2004 by texi2html 1.65 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>TOP-C (Task Oriented Parallel C/C++): Writing TOP-C Applications</TITLE>

<META NAME="description" CONTENT="TOP-C (Task Oriented Parallel C/C++): Writing TOP-C Applications">
<META NAME="keywords" CONTENT="TOP-C (Task Oriented Parallel C/C++): Writing TOP-C Applications">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.65">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_3.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_3.html#SEC3"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 4. Writing `<SAMP>TOP-C</SAMP>' Applications </H1>
<!--docid::SEC14::-->
<P>

This chapter assumes a knowledge of the basic concepts in
<A HREF="topc_3.html#SEC3">3. Overview of `<SAMP>TOP-C/C++</SAMP>'</A>.  In particular, recall <A HREF="topc_3.html#SEC5">3.1.1 Structure of a TOP-C Program</A>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="topc_4.html#SEC15">4.1 The Main TOP-C Library Calls</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="topc_4.html#SEC16">4.2 Callback Functions for <CODE>TOPC_master_slave()</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="topc_4.html#SEC17">4.3 Actions Returned by <CODE>CheckTaskResult()</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="topc_4.html#SEC18">4.4 TOP-C Utilities</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="The Main TOP-C Library Calls"></A>
<HR SIZE="6">
<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.1 The Main TOP-C Library Calls </H2>
<!--docid::SEC15::-->
<P>

<A NAME="IDX15"></A>
<A NAME="IDX16"></A>
<A NAME="IDX17"></A>
<A NAME="IDX18"></A>
<A NAME="IDX19"></A>
</P><P>

Every `<SAMP>TOP-C</SAMP>' application must include a `<TT>topc.h</TT>' header, open
with <CODE>TOPC_init()</CODE>, call <CODE>TOPC_master_slave()</CODE> one or more
times, and then close with <CODE>TOPC_finalize()</CODE>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif"><CODE>#include &#60;topc.h&#62;</CODE>
      Required at head of any file using TOPC library calls.
</pre></td></tr></table><A NAME="IDX20"></A>
<DL>
<DT><U>Function:</U> void <B>TOPC_init</B> <I>( int *<VAR>argc</VAR>, char ***<VAR>argv</VAR> )</I>
<DD>       Required before first occurrence of <CODE>TOPC_master_slave()</CODE>;
       Recommended to place this as first executable statement in
         <CODE>main()</CODE>.  It will strip off extra `<SAMP>TOP-C</SAMP>' and
         communication layer arguments such as `<SAMP>--TOPC-stats</SAMP>',
         which are added by `<SAMP>TOP-C</SAMP>'.
</DL>
<A NAME="IDX21"></A>
<DL>
<DT><U>Function:</U> void <B>TOPC_finalize</B> <I>( void )</I>
<DD>       Placed after last `<SAMP>TOP-C</SAMP>' command.
</DL>
<A NAME="IDX22"></A>
<DL>
<DT><U>Function:</U> void <B>TOPC_master_slave</B>
<DD>  ( TOPC_BUF (*<VAR>generate_task_input</VAR>)(),<BR>&nbsp;&nbsp;    TOPC_BUF (*<VAR>do_task</VAR>)(void *input),<BR>&nbsp;&nbsp;    TOPC_ACTION (*<VAR>check_task_result</VAR>)(void *input, void *output),<BR>&nbsp;&nbsp;    void (*<VAR>update_shared_data</VAR>)(void *input, void *output)
  <BR>)
      <BR>Primary call, passed four application callbacks to `<SAMP>TOP-C</SAMP>'.
        One can have multiple calls to
        <CODE>TOPC_master_slave()</CODE>, each invoking different callback functions,
        between <CODE>TOPC_init()</CODE>
        and <CODE>TOPC_finalize()</CODE>.
</DL>
</P><P>

A task input or task output is simply a buffer of bytes, specified by
<CODE>TOPC_MSG()</CODE>.
</P><P>

<A NAME="IDX23"></A>
<DL>
<DT><U>Function:</U> TOPC_BUF <B>TOPC_MSG</B> <I>( void *<VAR>buf</VAR>, int <VAR>buf_size</VAR> )</I>
<DD>        Must be returned by <CODE>GenerateTaskInput()</CODE> and <CODE>DoTask()</CODE>.
        Specifies arbitrary user data structure.
        `<SAMP>TOP-C</SAMP>' will make a copy of <VAR>buf</VAR> in `<SAMP>TOP-C</SAMP>' space.
        It remains the responsibility of the application to free or
	reuse the space of the original buffer <VAR>buf</VAR>.  If
	<CODE>TOPC_MSG(NULL, 0)</CODE> is called, a <CODE>NULL</CODE> pointer will be
	received at the destination.
	(See section <A HREF="topc_8.html#SEC44">8.3.2 Using <CODE>TOPC_MSG_PTR()</CODE> to Avoid Copying Large Buffers</A>, for <CODE>TOPC_MSG_PTR</CODE>,
	to avoid copying very large buffers, where the overhead is
	unacceptable.)
</DL>
</P><P>

EXAMPLE:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>    TOPC_BUF convert_string_to_msg( char *mystring ) {
        if (mystring == NULL) return TOPC_MSG(NULL,0);
        else return TOPC_MSG(mystring, strlen(mystring)+1);
    }
</pre></td></tr></table></P><P>

<A NAME="Callback Functions"></A>
<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.2 Callback Functions for <CODE>TOPC_master_slave()</CODE> </H2>
<!--docid::SEC16::-->
<P>

The application writer must define the following four callback functions
(although the last can be <CODE>NULL</CODE>).  The <VAR>callback</VAR> terminology
is based on C concepts.  In a more object-oriented style, one would
view user callbacks as instantiation of abstract methods in a
user-defined subclass.  The first two functions return a
<CODE>TOPC_BUF</CODE>, which is produced by <CODE>TOPC_MSG()</CODE>.
<A NAME="IDX24"></A>
<DL>
<DT><U>Function:</U> TOPC_BUF <B>GenerateTaskInput</B> <I>( void )</I>
<DD>        executes on master; returns a data structure specified by
        <CODE>TOPC_MSG(<VAR>buf</VAR>, <VAR>buf_size</VAR>)</CODE>.
        It should return <CODE>NOTASK</CODE>, when there are no more tasks, and it
        should be prepared to return <CODE>NOTASK</CODE> again if invoked again.
</DL>
<A NAME="IDX25"></A>
<DL>
<DT><U>Function:</U> TOPC_BUF <B>DoTask</B> <I>( void *<VAR>input</VAR> )</I>
<DD>        executes on slave; operates on the result of <CODE>GenerateTaskInput()</CODE>;
        returns a data structure specified by
        <CODE>TOPC_MSG(<VAR>buf</VAR>, <VAR>buf_size</VAR>)</CODE>.
        <VAR>buf</VAR> must be a static or global user buffer.
</DL>
<A NAME="IDX26"></A>
<DL>
<DT><U>Function:</U> TOPC_ACTION <B>CheckTaskResult</B> <I>( void *<VAR>input</VAR>, void *<VAR>output</VAR>)</I>
<DD>        executes on master; operates on the result of <CODE>DoTask()</CODE>;
        returns an <VAR>ACTION</VAR> that determines what happens to the task next.
        The terminology <EM>result</EM> refers to an `<SAMP>(input, output)</SAMP>' pair.
        An easy way to write <CODE>CheckTaskResult()</CODE> appears in the
        example for the utility <CODE>TOPC_is_up_to_date()</CODE>.
        When returning the action <CODE>UPDATE</CODE>, it works to first modify
        the input and output buffers.  <CODE>UpdateSharedData()</CODE> will
        then be invoked with the modified buffers.
        See <A HREF="topc_4.html#SEC18">4.4 TOP-C Utilities</A>, for more details.
</DL>
<A NAME="IDX27"></A>
<DL>
<DT><U>Function:</U> void <B>UpdateSharedData</B> <I>( void *<VAR>input</VAR>, void *<VAR>output</VAR> )</I>
<DD>        executes on master and all slaves; operates on the result of
        <CODE>DoTask()</CODE>, and the original task returned by
        <CODE>GenerateTaskInput()</CODE>;
        called only if <CODE>CheckTaskResult()</CODE> returned <CODE>UPDATE</CODE>;
        useful for updating global variables in all processes;
        The pointer argument, <VAR>update_shared_data</VAR>, of
        <CODE>TOPC_master_slave()</CODE> may be <CODE>NULL</CODE> if
        an application never requests an <CODE>UPDATE</CODE> action.
        In a shared memory environment, only the master calls
        <CODE>UpdateSharedData()</CODE>.  See <A HREF="topc_8.html#SEC47">8.4 Optimizing TOP-C Code for the Shared Memory Model</A>, for more details.
</DL>
</P><P>

Note that in defining the above callback functions, C allows one to
replace the <CODE>(void *)</CODE> declaration of the arguments by specific
pointer types.  Note that the buffers of any message parameters
(<VAR>input</VAR> and <VAR>output</VAR>) of <CODE>DoTask()</CODE> or
<CODE>CheckTaskResult()</CODE> are part of TOP-C space.  Such buffers may be
freed by TOP-C on exit from the callback function.  An application
wishing to use the buffer after the callback exits must explicitly save
a copy into the application's own space.
</P><P>

<A NAME="Actions"></A>
<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.3 Actions Returned by <CODE>CheckTaskResult()</CODE> </H2>
<!--docid::SEC17::-->
<P>

<A NAME="IDX28"></A>
</P><P>

A <EM>TOP-C result</EM> is an  (<VAR>input</VAR>, <VAR>output</VAR>) pair corresponding
to an invocation of <CODE>DoTask()</CODE>.  `<SAMP>TOP-C</SAMP>' passes the result to
<CODE>CheckTaskResult()</CODE>.  The return value allows the application to
tell `<SAMP>TOP-C</SAMP>' what further actions to take.
The actions returned by <CODE>CheckTaskResult()</CODE> are:
<A NAME="IDX29"></A>
<DL>
<DT><U>Action:</U> TOPC_ACTION <B>NO_ACTION</B>
<DD>  C constant, causing no further action for task
</DL>
<A NAME="IDX30"></A>
<DL>
<DT><U>Action:</U> TOPC_ACTION <B>UPDATE</B>
<DD>  C constant, invoking <CODE>UpdateSharedData( void *<VAR>input</VAR>,
  void *<VAR>output</VAR>)</CODE>  (see below)
  also updates bookkeeping for sake of <CODE>TOPC_is_up_to_date()</CODE>
  (see section <A HREF="topc_4.html#SEC18">4.4 TOP-C Utilities</A>)
</DL>
<A NAME="IDX31"></A>
<DL>
<DT><U>Action:</U> TOPC_ACTION <B>REDO</B>
<DD>          Invoke <CODE>DoTask()</CODE> on original task input again, and on
          the same slave that previously executed the task; useful if
	  shared data has changed since original
          invocation of <CODE>DoTask()</CODE> (see <CODE>TOPC_is_up_to_date()</CODE>,
          below).  See <A HREF="topc_7.html#SEC36">7.2 Strategies for Greater Concurrency</A>,
	  for slave strategies to efficiently process a <CODE>REDO</CODE> action.
</DL>
<A NAME="IDX32"></A>
<DL>
<DT><U>Action:</U> TOPC_ACTION <B>CONTINUATION</B> <I>( void *<VAR>next_input</VAR> )</I>
<DD>        <CODE>CONTINUATION(<VAR>next_input</VAR>)</CODE> is a parametrized action that
	may be returned by <CODE>CheckTaskResult()</CODE>, after which
        <CODE>DoTask( <VAR>next_input</VAR> )</CODE> is called on the original slave.
        This is useful if only the master can decide whether task is complete,
	or if the master wishes to supply additional input messages
	needed for the task.
	Note that <CODE>REDO</CODE> is essentially equivalent to
	<CODE>CONTINUATION( <VAR>original_task_input</VAR> )</CODE>.
        Note that any pending calls to <CODE>UpdateSharedData()</CODE> will have
        occurred on the slave before the new call to <CODE>DoTask()</CODE>.
        Hence, this allows an extended conversation between master and
        slave, in which the slave continues to receive updates of the
        shared data before each new input from the master.
        Note also that even though a <CODE>CONTINUATION</CODE> action returns
        to the original slave, any previous pointers to input buffers
	on that slave
        (and pointers to output buffers from intervening <CODE>UPDATE</CODE>
        actions) will no longer be valid.  Useful data from previous buffers
        should have been copied into global variables on the slave.
        In the case of the shared memory model, those global variables must be
        thread-private.  (see section <A HREF="topc_8.html#SEC49">8.4.2 Thread-Private Global Variables</A>)
</DL>
</P><P>

It is possible for <CODE>CheckTaskResult(<VAR>input</VAR>, <VAR>output</VAR>)</CODE> to
modify the buffer data in its two arguments, <VAR>input</VAR> and <VAR>output</VAR>,
in which case the modifications will be visible to any further
callback functions processing the current task.  This practice makes
the code more difficult to maintain, and is not recommended when other
solutions are available.
</P><P>

<A NAME="TOP-C Utilities"></A>
<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.4 TOP-C Utilities </H2>
<!--docid::SEC18::-->
<P>

`<SAMP>TOP-C</SAMP>' also defines some utilities.
<A NAME="IDX33"></A>
<DL>
<DT><U>Function:</U> TOPC_BOOL <B>TOPC_is_up_to_date</B> <I>( void )</I>
<DD>        returns TRUE or FALSE (1 or 0); returns TRUE if and only if
        <CODE>CheckTaskResult()</CODE>
        has not returned the result <CODE>UPDATE</CODE> (invoking
        <CODE>UpdateSharedData()</CODE>)
        between the time when <CODE>GenerateTaskInput()</CODE> was originally
        called on the
        current task, and the time when the corresponding
        <CODE>CheckTaskResult()</CODE>
        was called.
        Typical usage:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>          TOPC_ACTION CheckTaskResult( void *input, void *output )
          { if (input == NULL) return NO_ACTION;
            else if (TOPC_is_up_to_date()) return UPDATE;
            else return REDO;
          }&nbsp;</pre></td></tr></table></DL>
<A NAME="IDX34"></A>
<DL>
<DT><U>Function:</U> int <B>TOPC_rank</B> <I>( void )</I>
<DD>        Unique ID of process or thread.  Master always has rank 0.
        Slaves have contiguous ranks, beginning at 1.
</DL>
<A NAME="IDX35"></A>
<DL>
<DT><U>Function:</U> TOPC_BOOL <B>TOPC_is_master</B> <I>( void )</I>
<DD>        Returns boolean, 0 or 1, depending on if this is master.
        Equivalent to <CODE>TOPC_rank() == 0</CODE>.
</DL>
<A NAME="IDX36"></A>
<DL>
<DT><U>Function:</U> int <B>TOPC_num_slaves</B> <I>( void )</I>
<DD>        Total number of slaves.
</DL>
<A NAME="IDX37"></A>
<DL>
<DT><U>Function:</U> int <B>TOPC_num_idle_slaves</B> <I>( void )</I>
<DD>        Total number of idle slaves (not doing task, update or other action).
</DL>
<A NAME="IDX38"></A>
<DL>
<DT><U>Function:</U> int <B>TOPC_node_count</B> <I>( void )</I>
<DD>        Total number of processes or threads.  Equivalent to
        <CODE>TOPC_num_slaves() + 1</CODE>.
</DL>
</P><P>

<A NAME="IDX39"></A>
<DL>
<DT><U>Function:</U> TOPC_BOOL <B>TOPC_is_REDO</B> <I>( void )</I>
<DD><A NAME="IDX40"></A>
<DT><U>Function:</U> TOPC_BOOL <B>TOPC_is_CONTINUATION</B> <I>( void )</I>
<DD><A NAME="IDX41"></A>
<DT><U>Function:</U> void <B>TOPC_abort_tasks</B> <I>( void )</I>
<DD><A NAME="IDX42"></A>
<DT><U>Function:</U> TOPC_BOOL <B>TOPC_is_abort_pending</B> <I>( void )</I>
<DD>	See <A HREF="topc_8.html#SEC39">8. Advanced Features of `<SAMP>TOP-C</SAMP>'</A> for descriptions.
</DL>
</P><P>

<A NAME="Compiling and Invoking TOP-C Applications"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_4.html#SEC14"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_5.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_14.html#SEC62">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="topc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Gene Cooperman</I> on <I>October, 6  2004</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
